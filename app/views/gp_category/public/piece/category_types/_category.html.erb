<%- unless category.public_docs.empty? -%>
<div class="docs">
  <section class="category <%= category.name -%>">
    <ul class="docs">
      <%- category.public_docs.each do |doc| -%>
      <li>
        <%- if doc.target.present? -%>
          <%- if doc.href.present? -%>
            <%= link_to doc.title, doc.href, target: doc.target %>
          <%- else -%>
            <%= doc.title -%>
          <%- end -%>
        <%- else -%>
          <%= link_to doc.title, doc.public_uri %>
        <%- end -%>
        <%- if doc.summary.present? -%>
        <p class="summary"><%= doc.summary %></p>
        <%- end -%>
      </li>
      <%- end -%>
    </ul>
  </section>
</div>
<%- end -%>

<%- unless category.children.empty? -%>
<div class="level<%= category.level_no + 1 -%>">
  <%- category.children.each do |child| -%>
  <section class="category <%= child.name -%><%= cycle '', ' cycle' %>">
    <h3><%= link_to child.title, "#{category_type.public_uri}#{child.path_from_root_category}/" %></h3>

    <%- unless child.public_docs.empty? -%>
    <ul class="docs">
      <%- child.public_docs.each do |doc| -%>
      <li>
        <%- if doc.target.present? -%>
          <%= link_to doc.title, doc.href, target: doc.target %>
        <%- else -%>
          <%= link_to doc.title, doc.public_uri %>
        <%- end -%>
        <%- if doc.summary.present? -%>
        <p class="summary"><%= doc.summary %></p>
        <%- end -%>
      </li>
      <%- end -%>
    </ul>
    <%- end -%>

    <%- unless child.children.empty? -%>
    <ul class="level<%= child.level_no + 1 -%>">
      <%- child.children.each do |grandchild| -%>
      <li class="<%= grandchild.name -%>"><%= link_to grandchild.title, "#{category_type.public_uri}#{grandchild.path_from_root_category}/" %></li>
      <%- end -%>
    </ul>
    <%- end -%>
  </section>
  <%- end -%>
</div>
<%- end -%>
